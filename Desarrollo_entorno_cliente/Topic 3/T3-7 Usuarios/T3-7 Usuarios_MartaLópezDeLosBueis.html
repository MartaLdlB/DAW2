<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T3-7 Usuarios</title>
</head>
<body>
    <form>
        <label for="cadena">Introduce tus datos</label>
        <br>
        <input type="text" name="cadena" id="cadena" placeholder="nombre:apellidos:dni:telefono:email:codigopostal">
        <br><br>
        <button onclick="">Pulsa y ve la magia</button>
    </form>
    <script>

        /*

        Realizar un programa que reciba una cadena con el siguiente formato:

        ‚Äúnombre:apellidos:dni:telefono:email:codigopostal‚Äù


        1.Tras recibir la cadena, se debe desglosar la informaci√≥n. Crear una estructura de datos que recoja la informaci√≥n extra√≠da de la cadena de caracteres.
        2.Validar si la letra del DNI introducido es correcta. (Para la validaci√≥n usar aproximaci√≥n sin utilizar Expresiones regulares). 
        A√±adir el campo de tipo boolean ‚ÄúdniValido‚Äù cuyo valor ser√° true en caso de DNI correcto o false en caso de que la letra del DNI del usuario no coincida.
        3.Suponiendo un formato de email ‚Äúdireccion@servidor‚Äù, se debe crear un campo llamado ‚Äúservidor‚Äù para asignarle el nombre del servidor asociado (sin la @).
        4.Generar un nombre de usuario con la primera letra del nombre, las tres √∫ltimas del apellido separadas por un car√°cter ‚Äú_‚Äù.
        5.Guardar el nombre de usuario generado en el campo ‚Äúusername‚Äù de la estructura creada, asociado a cada usuario.
        6.A√±adir un campo a la estructura llamado ‚Äúpa√≠s‚Äù y asignar como valor una cadena de caracteres que represente la bandera de su pa√≠s (elegir cualquiera). 
        *Dependiendo del navegador, en algunos casos se puede visualizar un icono de la bandera o en otros casos la combinaci√≥n de los caracteres √∫nicos para cada pa√≠s. 
        (Ejemplo: Espa√±a se podr√≠a visualizar: Bandera de Espa√±a o üá™üá∏).
        7.Mostrar los nombres de usuario y las banderas correspondientes a su pa√≠s en la p√°gina del lado del cliente.
        8.Por √∫ltimo, si la inicial del nombre y los dos primeros caracteres del apellido forman la palabra ‚Äúoso‚Äù (sin distinguir may√∫sculas o min√∫sculas), 
        la p√°gina lanzar√° una ventana de dialogo de tipo alert: ‚Äú¬°Cuidado, hay # osos cerca!‚Äù, indicando en # el n√∫mero de usuarios con la cadena.
        Unos usuarios de ejemplo ser√≠an:

        Rocio:Osorno:01101315Y:612345649:rocio@outlook.com:28001
        Sonia: Sastre:15340807Z:765430987:ssastre@gmail.com:43071
        Olivia:Soriano:46216401X:654567098:osor01@educa.madrid.org:28660
        Elena:Costaguta:70068005T:7123098654:ecostag@madrid.org:45230
        Orestes:Sosa:52243028T::sosaorestes2000@yahoo.com:28001
        
        */


        let cadena;
        cadena= document.getElementById("cadena").value;

        //variables para la cadena
        let nombre;
        let apellido;
        let dni;
        let telefono;
        let email;
        let codigoPostal;

        //resto de variables
        let cadenaArray=[]; //esta variable ser√° un array que contendr√° los datos de la cadena
        let dniValido; //boolean que almacena si el DNI introducido por el usuario es correcto
        let servidor=obtenerServidor(email); //Esta variable almacenar√° el servidor que urilice en el email para mostrarlo sin la @
        let username; //Esta variable tendr√° el nombre de usuario que se generar√° con la 1¬∫ letra de su nombre y las 3 ultimas de su apellido separadas por _ ejemplo n_aaa


        cadenaArray=cadena.split(":"); //El m√©todo split() devuelve el nuevo array.


        //Al formar un array con los datos de la cadena, suponemos que el usuario los ha introducido correctamente, por lo que
        //se almacenan en su variable
        nombre=cadenaArray[0];
        apellido=cadenaArray[1];
        dni=cadenaArray[2];
        telefono=cadenaArray[3];
        email=cadenaArray[4];
        codigoPostal=cadenaArray[5];


        
        function obtenerServidor(email){

            let arroba="@";
            
            let cadenaServidor= String.prototype.substring(email.charAt(arroba));

            return cadenaServidor;

        }


    </script>


</body>
</html>