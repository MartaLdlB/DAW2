<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T3-3_DNI</title>
</head>
<body>
    <form>

        <label for="dni">Introduce tu DNI</label><br>
        <input type="text" name="dni" id="dni" placeholder="12345678X"><br><br>
        <button onclick="dni()">Pulsa para ver la magia</button>
    </form>

    <script>
        function dni(){

            let dni;
            let numerosDni;
            let moduloDni;
            let letras = 'TRWAGMYFPDXBNJZSQVHLCKE';
            const rgx = new RegExp(/^\d{8}[TRWAGMYFPDXBNJZSQVHLCKE]$/);
            /*
            ^ asegura que la coincidencia comience al inicio de la cadena.
            \d{8} valida que haya exactamente 8 dígitos numéricos (del 0 al 9).
            [TRWAGMYFPDXBNJZSQVHLCKE] asegura que el último carácter sea una letra mayúscula de las que estan ahi escritas
            $ asegura que la coincidencia termine al final de la cadena, sin caracteres adicionales.
            */

            dni=document.getElementById("dni").value;
            
            if(dni.match(rgx)){
                numerosDni = parseInt(dni.slice(0,8));
                moduloDni = numerosDni%23;
                if(letras[moduloDni] === dni.charAt(8)){
                    document.write("Tu DNI es correcto--> "+dni);
                }else{
                    document.write("Tu DNI no es correcto--> "+dni);
                }
            }else{
                document.write("DNI erroneo, revisalo");
            }
        }
        

    </script>
</body>
</html>